(this.webpackJsonpgui=this.webpackJsonpgui||[]).push([[0],{232:function(e,t,n){e.exports=n(435)},237:function(e,t,n){},435:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),c=n.n(o),l=(n(237),n(40)),i=n(41),s=n(43),u=n(42),m=(n(238),n(47)),p=n(31),d=n(446),f=n(441),h=n(443),g=n(447),y=n(448),E=n(449),b=function(e){var t=e.icon,n=e.text;return r.a.createElement(d.b,null,r.a.createElement(t),n)},v=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:3},dataSource:e.data,renderItem:function(e){return r.a.createElement(f.b.Item,{key:e.title,actions:[r.a.createElement(b,{icon:g.a,text:"156",key:"list-vertical-star-o"}),r.a.createElement(b,{icon:y.a,text:"156",key:"list-vertical-like-o"}),r.a.createElement(b,{icon:E.a,text:"2",key:"list-vertical-message"})],extra:r.a.createElement("img",{width:272,alt:"logo",src:"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png"})},r.a.createElement(f.b.Item.Meta,{avatar:r.a.createElement(h.a,{src:e.avatar}),title:r.a.createElement("a",{href:"/edit/".concat(e.id)},e.title),description:e.description}))}}))},k=n(85),j=n.n(k),O=n(38),S=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={resumes:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({resumes:t.data})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{data:this.state.resumes}))}}]),n}(r.a.Component),T=Object(O.b)((function(e){return{token:e.token}}),null)(S),w=n(440),I=n(112),C=n(108),A=n.n(C),D=n(72),x=n.n(D),H=function(e){var t=Object(a.useRef)(null),n=function(){t.current.editor.exportHtml((function(e){e.design;var t=e.html;console.log("exportHtml",t),alert("Output HTML has been logged in your developer console.");var n=new Blob([t],{type:"application/pdf"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download="index.html",r.click()}))},o=function(){t.current.editor.loadDesign(e.content),console.log(e,"---props")};return r.a.createElement(r.a.Fragment,null,e.user===parseInt(localStorage.getItem("userdata"))?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){t.current.editor.saveDesign((function(t){var n={title:e.title,content:t,id:e.id,csrfmiddlewaretoken:x.a.get("csrftoken")};console.log(n),fetch("/api/".concat(e.id,"/update/"),{method:"PUT",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){console.log(e),alert("Successfully saved your template!")}))}))}},"Save Design"),r.a.createElement("button",{onClick:n},"Download HTML"),r.a.createElement(I.a,{ref:t,onLoad:o}),r.a.createElement(A.a,null)):r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Download HTML"),r.a.createElement(I.a,{ref:t,onLoad:o}),r.a.createElement(A.a,null)))},L=n(229),F=n(163),U=n.n(F),P=n(437),M=n(94);var _=function(e){return r.a.createElement("div",null,r.a.createElement(P.a,{author:e.commentsData.name,avatar:r.a.createElement(h.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:r.a.createElement("p",null,e.commentsData.body),datetime:r.a.createElement(M.a,{title:U()().format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,e.commentsData.created_on))}))},R=n(442),z=n(78),N=R.a.TextArea,q=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={body:""},e.handleClick=function(){var t={resume:e.props.id,name:localStorage.getItem("username"),userid:localStorage.getItem("userdata"),body:e.state.body,csrfmiddlewaretoken:x.a.get("csrftoken")};console.log(t),fetch("/api/comment/".concat(e.props.id,"/"),{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return alert("Successfully posted your comment!"),e.json()})).then((function(t){console.log(t),e.setState((function(e){return{commentsList:[].concat(Object(L.a)(e.commentsList),[t])}})),e.setState({body:""})})).catch((function(e){console.log(e)}))},e.handleChange=function(t){t.preventDefault(),e.setState({body:t.target.value})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/comment/".concat(this.props.id,"/"),{headers:{"Content-Type":"application/json",Authorization:this.props.token}}).then((function(t){e.setState({commentsList:t.data})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.commentsList?this.state.commentsList.map((function(e){return r.a.createElement(_,{commentsData:e})})):r.a.createElement("p",null,"no comments yet"),r.a.createElement(N,{rows:4,onChange:function(t){e.handleChange(t)},value:this.state.body}),r.a.createElement(z.a,{type:"primary",onClick:function(){e.handleClick()}},"Post Comment"))}}]),n}(r.a.Component),J=Object(O.b)((function(e){return{token:e.token}}),null)(q),Y=n(212),B=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.resumeID;fetch("/api/".concat(t),{headers:{"Content-Type":"application/json",Authorization:this.props.token}}).then((function(t){e.setState({resume:t.data})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.resume?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{title:this.state.resume.title}),r.a.createElement(H,{content:this.state.resume.content,title:this.state.resume.title,id:this.props.match.params.resumeID,user:this.state.resume.user}),r.a.createElement("p",null,"Comments:"),r.a.createElement(J,{id:this.props.match.params.resumeID})):r.a.createElement(Y.a,null))}}]),n}(r.a.Component),V=Object(O.b)((function(e){return{token:e.token}}),null)(B),W=(n(357),function(e){var t=Object(a.useRef)(null);return r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"title",placeholder:"name your template",id:"title"}),r.a.createElement("button",{onClick:function(){t.current.editor.saveDesign((function(e){var t={title:document.getElementById("title").value,content:e,user:localStorage.getItem("userdata"),csrfmiddlewaretoken:x.a.get("csrftoken")};console.log(t),fetch("/api/",{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){console.log(e)}))}))}},"Save Design"),r.a.createElement("button",{onClick:function(){t.current.editor.exportHtml((function(e){e.design;var t=e.html;console.log("exportHtml",t),alert("Output HTML has been logged in your developer console.")}))}},"Export HTML"),r.a.createElement(I.a,{ref:t}),r.a.createElement(A.a,null))}),X=n(445),G=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(X.a,{status:"success",title:"Successfully Logged in!",subTitle:"Let's get started",extra:[r.a.createElement(z.a,{type:"primary",key:"console"},r.a.createElement("a",{href:"/"},"To Home"))]})}}]),n}(r.a.Component),K=n(439),Q=function(e){return{type:"AUTH_SUCCESS",token:e}},Z=function(e){return{type:"AUTH_FAIL",error:e}},$=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("username"),{type:"AUTH_LOGOUT"}},ee=function(e){return function(t){setTimeout((function(){t($())}),1e3*e)}},te=function(e){return function(t){console.log("getid is firing"),j.a.get("http://localhost:8000/dj-rest-auth/user/",{credentials:"omit",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token ".concat(e)}}).then((function(e){var n=e.data.pk;localStorage.setItem("userid",n),t(function(e){return{type:"AUTH_ID",userid:e}}(n))})).catch((function(e){console.log(e)}))}},ne={labelCol:{span:8},wrapperCol:{span:16}},ae={wrapperCol:{offset:8,span:16}};var re=Object(O.b)((function(e){return{loading:e.loading,error:e.error,token:e.token}}),(function(e){return{onAuth:function(t,n){return e(function(e,t){return function(n){n({type:"AUTH_START"});var a={username:e,password:t};console.log(a),fetch("/dj-rest-auth/login/",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var a=t.data.key;te(t.data.key);var r=new Date((new Date).getTime()+36e5);return localStorage.setItem("token",a),localStorage.setItem("username",e),localStorage.setItem("expirationDate",r),n(Q(a)),n(ee(3600)),console.log(a,"---back w token"),a})).then((function(e){console.log("getid is firing"),fetch("/dj-rest-auth/user/",{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("userdata",e.data.pk),console.log(e.data.pk)}))})).catch((function(e){n(Z(e.message))}))}}(t,n))}}}))((function(e){var t=null;e.error&&(t=r.a.createElement("p",null,e.error.message));return r.a.createElement("div",null,t,e.loading?r.a.createElement(Y.a,null):r.a.createElement(K.a,Object.assign({},ne,{name:"basic",initialValues:{remember:!0},onFinish:function(t){console.log("Success:",t),e.onAuth(t.username,t.password),e.history.push("/success")},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(K.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(R.a,null)),r.a.createElement(K.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(R.a.Password,null)),r.a.createElement(K.a.Item,ae,r.a.createElement("input",{type:"submit",value:"submit"}),"Or",r.a.createElement(m.c,{style:{marginRight:"10px"},to:"/signup/"},"  signup"))))})),oe=n(228);var ce=Object(O.b)((function(e){return{loading:e.loading,error:e.error}}),(function(e){return{onAuth:function(t,n,a,r){return e(function(e,t,n,a){return function(r){r({type:"AUTH_START"});var o={username:e,email:t,password1:n,password2:a};console.log(o),fetch("/dj-rest-auth/registration/",{method:"POST",body:JSON.stringify(o),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var n=t.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",n),localStorage.setItem("username",e),localStorage.setItem("expirationDate",a),r(Q(n)),r(ee(3600))})).catch((function(e){r(Z(e))}))}}(t,n,a,r))}}}))((function(e){var t=K.a.useForm(),n=Object(oe.a)(t,1)[0];return r.a.createElement(K.a,{form:n,name:"register",onFinish:function(t){console.log("Success:",t),e.onAuth(t.username,t.email,t.password,t.confirm),e.history.push("/")},scrollToFirstError:!0},r.a.createElement(K.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(R.a,null)),r.a.createElement(K.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(R.a,null)),r.a.createElement(K.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(R.a.Password,null)),r.a.createElement(K.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(R.a.Password,null)),r.a.createElement(K.a.Item,null,r.a.createElement("input",{type:"submit",value:"submit"}),"Or",r.a.createElement(m.c,{style:{marginRight:"10px"},to:"/login/"},"  login")))})),le=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={mytemplates:[],userid:parseInt(localStorage.getItem("userdata"))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json(),e})).then((function(t){return t.data.filter((function(t){return t.user===e.state.userid}))})).then((function(t){console.log(t),e.setState({mytemplates:t})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{data:this.state.mytemplates}))}}]),n}(r.a.Component),ie=function(){return r.a.createElement("div",null,r.a.createElement(p.a,{exact:!0,path:"/",component:T}),r.a.createElement(p.a,{exact:!0,path:"/create",component:W}),r.a.createElement(p.a,{exact:!0,path:"/edit/:resumeID/",component:V}),r.a.createElement(p.a,{exact:!0,path:"/success",component:G}),r.a.createElement(p.a,{exact:!0,path:"/login/",component:re}),r.a.createElement(p.a,{exact:!0,path:"/signup/",component:ce}),r.a.createElement(p.a,{exact:!0,path:"/mytemplates/",component:le}))},se=(n(432),n(438)),ue=n(168),me=n(444),pe=se.a.Header,de=se.a.Content,fe=se.a.Footer,he=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(se.a,{className:"layout"},r.a.createElement(pe,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(ue.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"]},this.props.isAuthenticated?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a.Item,{key:"2",onClick:this.props.logout},"Logout"),r.a.createElement(ue.a.Item,{key:"1"},r.a.createElement(m.b,{to:"/"},"Resumes")),r.a.createElement(ue.a.Item,{key:"3"},r.a.createElement(m.b,{to:"/mytemplates/"},"My Templates"))):r.a.createElement(ue.a.Item,{key:"2"},r.a.createElement(m.b,{to:"/login"},"Login")))),r.a.createElement(de,{style:{padding:"0 50px"}},r.a.createElement(me.a,{style:{margin:"16px 0"}},r.a.createElement(me.a.Item,null,r.a.createElement(m.b,{to:"/"},"Home")),r.a.createElement(me.a.Item,null,r.a.createElement(m.b,{to:"/create"},"Create New Template"))),r.a.createElement("div",{className:"site-layout-content"},this.props.children)),r.a.createElement(fe,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED"))}}]),n}(r.a.Component);var ge=Object(p.e)(Object(O.b)((function(e){return{loading:e.loading,error:e.error,token:e.token}}),(function(e){return{logout:function(){return e($())}}}))(he)),ye=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(ge,this.props,r.a.createElement(ie,null)))}}]),n}(r.a.Component),Ee=Object(O.b)((function(e){return{isAuthenticated:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(void 0===t)e($());else{var n=new Date(localStorage.getItem("expirationDate"));n<=new Date?e($()):(e(Q(t)),e(ee((n.getTime()-(new Date).getTime())/1e3)))}}))}}}))(ye);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=n(92),ve=n(224),ke=n(169),je=function(e,t){return Object(ke.a)(Object(ke.a)({},e),t)},Oe={token:null,error:null,loading:!1,userid:null},Se=function(e,t){return je(e,{error:null,loading:!0})},Te=function(e,t){return je(e,{token:t.token,error:null,loading:!1})},we=function(e,t){return je(e,{error:t.error,loading:!1})},Ie=function(e,t){return je(e,{token:null,userid:null})},Ce=function(e,t){return je(e,{token:null,userid:t.userid})},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Se(e);case"AUTH_SUCCESS":return Te(e,t);case"AUTH_FAIL":return we(e,t);case"AUTH_LOGOUT":return Ie(e);case"AUTH_ID":return Ce(e,t);default:return e}},De=n(225),xe=Object(be.createStore)(Ae,{},Object(De.composeWithDevTools)(Object(be.applyMiddleware)(ve.a))),He=r.a.createElement(O.a,{store:xe},r.a.createElement(Ee,null));c.a.render(r.a.createElement(r.a.StrictMode,null,He),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[232,1,2]]]);
//# sourceMappingURL=main.6c6a680e.chunk.js.map